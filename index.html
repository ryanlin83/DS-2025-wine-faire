<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>商品條碼查詢系統</title>
<style>
  body {
    font-family: "Microsoft JhengHei", sans-serif;
    background-color: #f8f3f0;
    margin: 0;
    padding: 0;
    color: #4a0e0e;
  }
  .container {
    max-width: 1200px;
    margin: auto;
    background-color: #fffaf7;
    border-radius: 16px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    padding: 20px;
  }
  h1 {
    text-align: center;
    color: #7a1414;
    margin-bottom: 20px;
  }
  .input-area {
    text-align: center;
    margin-bottom: 20px;
  }
  input[type="text"] {
    padding: 8px;
    width: 250px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
  button {
    padding: 8px 16px;
    margin: 5px;
    border: none;
    background-color: #a83232;
    color: white;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background-color: #8a2828;
  }
  .note {
    text-align: center;
    color: #7a1414;
    margin-top: 10px;
    font-size: 15px;
  }
  .note strong {
    font-size: 17px;
  }

  /* 表格版（桌機） */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }
  th, td {
    border: 1px solid #e0c6c6;
    padding: 10px;
    text-align: left;
  }
  th {
    background-color: #f3e1de;
    color: #7a1414;
    width: 20%;
  }
  td {
    width: 30%;
  }
  .barcode {
    display: block;
    margin: 5px auto;
    width: 120px;
    height: 60px;
  }

  /* 手機卡片版 */
  @media (max-width: 768px) {
    table {
      display: none;
    }
    .card {
      display: block;
      background: #fffaf7;
      border-radius: 16px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin: 15px 10px;
      padding: 12px 15px;
    }
    .card-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
    }
    .card-label {
      font-weight: bold;
      color: #7a1414;
    }
    .barcode {
      display: block;
      margin: 8px auto;
      width: 180px; /* 手機條碼放大 50% */
      height: 90px;
    }
  }

  /* 桌機隱藏卡片版 */
  @media (min-width: 769px) {
    .card {
      display: none;
    }
  }
</style>
</head>
<body>
<div class="container">
  <h1>商品條碼查詢系統</h1>
  <div class="input-area">
    <input type="text" id="searchInput" placeholder="請輸入商品名稱或條碼" />
    <button id="searchBtn">查詢</button>
    <button id="clearBtn">清空查詢</button>
  </div>

  <p class="note">為確保查詢系統的操作體驗，單次最多查詢支數請以 5 支為限。</p>
  <p class="note"><strong>可在『數量』欄位填上想購買的數量後，即可截圖此畫面，結帳時將此截圖提供給服務人員。</strong></p>

  <div id="results"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
<script>
const sampleData = [
  { order:"04-06-02", dm:"4", code:"1020125900101", name:"IGP卡斯康丘黃貓咪白酒", pos:"貨架3，第13支", qty:6, price:420, promo:"SP–買2送1", barcode:"3770013077227" },
  { order:"07-08-01", dm:"7", code:"1020031500101", name:"VAUCHER父子酒莊VDF黑皮諾紅酒", pos:"落地1區，第33支", qty:6, price:460, promo:"", barcode:"3770013077334" },
];

function renderResults(data){
  const container = document.getElementById("results");
  container.innerHTML = "";
  if(data.length===0){ container.innerHTML = "<p style='text-align:center;'>查無資料</p>"; return; }

  // 電腦版表格
  let html = "<table><thead><tr><th>商品訂購編號</th><th>DM 頁數</th><th>Item CODE</th><th>商品名稱</th><th>商品位置</th><th>每箱瓶數</th><th>價格(瓶)</th><th>優惠活動</th><th>條碼</th><th>數量</th><th>條碼圖</th></tr></thead><tbody>";
  data.forEach(item=>{
    html += `<tr>
      <td>${item.order}</td>
      <td>${item.dm}</td>
      <td>${item.code}</td>
      <td>${item.name}</td>
      <td>${item.pos}</td>
      <td>${item.qty}</td>
      <td>${item.price}</td>
      <td>${item.promo}</td>
      <td>${item.barcode}</td>
      <td><input type="number" min="0" style="width:60px;" /></td>
      <td><svg class="barcode"></svg></td>
    </tr>`;
  });
  html += "</tbody></table>";
  container.innerHTML = html;

  // 手機版卡片
  data.forEach(item=>{
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class="card-row"><div class="card-label">商品訂購編號</div><div>${item.order}</div></div>
      <div class="card-row"><div class="card-label">DM 頁數</div><div>${item.dm}</div></div>
      <div class="card-row"><div class="card-label">Item CODE</div><div>${item.code}</div></div>
      <div class="card-row"><div class="card-label">商品名稱</div><div>${item.name}</div></div>
      <div class="card-row"><div class="card-label">商品位置</div><div>${item.pos}</div></div>
      <div class="card-row"><div class="card-label">每箱瓶數</div><div>${item.qty}</div></div>
      <div class="card-row"><div class="card-label">價格(瓶)</div><div>${item.price}</div></div>
      <div class="card-row"><div class="card-label">優惠活動</div><div>${item.promo}</div></div>
      <div class="card-row"><div class="card-label">條碼</div><div>${item.barcode}</div></div>
      <div class="card-row"><div class="card-label">數量</div><input type="number" min="0" style="width:80px;" /></div>
      <div style="text-align:center;"><svg class="barcode"></svg></div>`;
    container.appendChild(card);
  });

  // 產生條碼圖
  document.querySelectorAll(".barcode").forEach((svg, i)=>{
    JsBarcode(svg, data[i % data.length].barcode, {
      format: "EAN13",
      displayValue: true,
      fontSize: 12,
      width: 1.8,
      height: 60
    });
  });
}

document.getElementById("searchBtn").addEventListener("click",()=>{
  const q = document.getElementById("searchInput").value.trim();
  const results = sampleData.filter(d=>d.name.includes(q)||d.barcode.includes(q)||d.code.includes(q));
  renderResults(results);
});

document.getElementById("clearBtn").addEventListener("click",()=>{
  document.getElementById("searchInput").value="";
  document.getElementById("results").innerHTML="";
});
</script>
</body>
</html>
